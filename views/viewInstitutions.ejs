<%- include ('partials/header') %>

<link rel="stylesheet" type="text/css" href="/assets/css/question_view.css">

<header class="jumbotron py-5">
  <h1><span class="glyphicon glyphicon-tent align-bottom" aria-hidden="true"><img height="45px"
        src="/assets/img/comment.png"></span> Welcome to Chatbot!</h1>
  <hr>
  <a class="btn btn-primary btn-lg mb-0" href="/institutions/new" role="button">Add new institution</a>
</header>

<div class="row text-center" style="display: flex; flex-wrap: wrap;">

  <div class="col-md-12">
    <h4>View Institutions by</h4>
  </div>

  <form class="col-md-12 my-2" method="GET" action="/institutions">
    <div class="row">
      <div class="form-group col-md-8">
        <div class="row">
          <label class="col-md-4" for="institutionType">Institiution Type</label>
          <select id="institutionType" class="col-md-8 form-control" name="institutionType" required>
            <option value="--select--">All types</option>
            <% institutionTypes.forEach( (institutionType) => {%>
            <option value="<%= institutionType %>" <% if(institutionType == currType) { %> selected <% } %>>
              <%= institutionType %>
            </option>
            <% } ) %>
          </select>
        </div>
      </div>
      <div class="col-md-4 form-group">
        <button type="Submit" class="btn btn-md btn-primary btn-block">Submit!</button>
      </div>
    </div>
  </form>

  <% institutions.forEach(function(institution) { %>

  <a href="/institutions/<%= institution.id %>/users">
    <div class="col-md-6 col-xs-12 my-2">
      <div class="thumbnail card px-3 pb-2">
        <div class="row card mb-2">
          <div class="col-xs-6 col">
            <h4><%= institution.name %></h4>
          </div>
          <div class="col-xs-6 col">
            <h4 class="text-muted"><%= institution.institutionType %></h4>
          </div>
        </div>
        <div class="row my-1">
          <div class="col-xs-6 col">
            <a href="/institutions/<%= institution.id %>/edit" class="text">Edit</a>
          </div>
          <div class="col-xs-6 col">
            <a href="/institutions/<%= institution.id %>/delete" class="text"
              onclick="return confirm('Do you want to delete this institution ! This action cannot be reversed');">Delete</a>
          </div>
        </div>
      </div>
    </div>
  </a>
  <% }); %>
</div>

<%- include ('partials/footer') %>